<!-- Tudo igual ao anterior, sÃ³ muda essas partes ğŸ‘‡ -->
<script>
  const formImovel = document.getElementById('formImovel');
  const resultadoImovel = document.getElementById('resultadoImovel');
  const formLead = document.getElementById('formLead');
  const resultadoLead = document.getElementById('resultadoLead');

  formImovel.onsubmit = async (e) => {
    e.preventDefault();
    resultadoImovel.innerHTML = "Analisando com IA... â³";
    const dados = Object.fromEntries(new FormData(formImovel).entries());
    const prompt = `VocÃª Ã© um avaliador de imÃ³veis. Avalie o imÃ³vel com os seguintes dados:
    - EndereÃ§o: ${dados.endereco}
    - Ãrea Ãºtil: ${dados.area} mÂ²
    - Quartos: ${dados.quartos}
    - Banheiros: ${dados.banheiros}
    - Vagas de garagem: ${dados.vagas}
    - Estado do imÃ³vel: ${dados.estado}
    - ObservaÃ§Ãµes: ${dados.obs || "Nenhuma"}

    Retorne:
    1. Valor estimado de mercado (em R$)
    2. Justificativa
    3. Dica de precificaÃ§Ã£o para o corretor`;

    const response = await fetch("/api/avaliador.js", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ prompt })
    });
    const data = await response.json();
    resultadoImovel.innerHTML = data.choices[0].message.content;
  };

  formLead.onsubmit = async (e) => {
    e.preventDefault();
    resultadoLead.innerHTML = "Analisando lead... â³";
    const dados = Object.fromEntries(new FormData(formLead).entries());
    const prompt = `VocÃª Ã© um especialista em vendas imobiliÃ¡rias. Um corretor atendeu um cliente com os seguintes dados:
    - Nome do cliente: ${dados.nome || "NÃ£o informado"}
    - Canal de atendimento: ${dados.canal}
    - Resumo do atendimento: ${dados.resumo}
    - Resultado final: ${dados.resultado}

    Analise o caso e retorne:
    ğŸ“Œ Motivo provÃ¡vel de nÃ£o fechamento
    ğŸ› ï¸ O que poderia ter sido feito diferente
    ğŸ¯ Dica para leads semelhantes no futuro.`;

    const response = await fetch("/api/lead.js", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ prompt })
    });
    const data = await response.json();
    resultadoLead.innerHTML = data.choices[0].message.content;
  };
</script>
